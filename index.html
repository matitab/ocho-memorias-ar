<!DOCTYPE html>
<html lang=es>
<head>
<meta charset=UTF-8>
<meta name=viewport content="width=device-width, initial-scale=1">
<title>Ocho Memorias Desde La Sombra</title>
<!-- Librer√≠as: A-Frame y MindAR -->
<script src=https://aframe.io/releases/1.6.0/aframe.min.js></script>
<script src=https://cdn.jsdelivr.net/npm/mind-ar@1.2.5/dist/mindar-image-aframe.prod.js></script>
<link href="https://fonts.googleapis.com/css2?family=Courier+Prime&display=swap" rel=stylesheet>
<link rel=preconnect href=https://fonts.googleapis.com>
<link rel=preconnect href=https://fonts.gstatic.com crossorigin>
<link rel=stylesheet href=styles.css>
<base href=./>
</head>
<body>
<!-- Imagen de fondo -->
<div id=img-fondo></div>
<!-- Pantalla de carga -->
<div id=pantalla-carga>
<div id=titulo-principal>
<h1>Ocho memorias</h1>
</div>
<h2 id=subtitulo>desde la sombra</h2>
<p>Explor√° el mapa y enfoc√° los marcadores para conocer las historias.</p>
<button id=boton-comenzar>Empezar recorrido</button>
</div>
<!-- Loader -->
<div id=mi-loader class=loader-container>
<span class=loader></span></div>
<!-- Men√∫ (general)-->
<div class=container-menu id=Menu>
    <div class=container-menu--bend></div>
    <input type=checkbox id=toggle>
    <div class=toggle-container>
    <button class=button-toggle>
        <span class=bar></span>
        <span class=bar></span>
        <span class=bar></span>
    </button>
    </div>
    <div class=nav>
        <div class=nombre-content id=nombre-persona><p>Nombre y apellido persona</p></div>
        <div class=nav-item onclick="showContent('Info',this)">Info</div>
        <div class=nav-item onclick="showContent('Historia',this)">Historia</div>
        <div class=nav-item onclick="showContent('Im√°genes',this)">Im√°genes</div>
        <div class=nav-item onclick="showContent('Video',this)">Video</div>
        <div class=dummy-content id=menu-content>Selecciona una opci√≥n del men√∫</div>
    </div>
</div>
<!-- Contador de marcadores detectados -->
<div id=contador-marcadores><!-- Mensaje por defecto: --> Escaneaste 0 de 3 im√°genes</div>
<!-- Cartel recorrido completado (si todos los marcadores son escaneados)-->
<div id=mensaje-final>
¬°Completaste el recorrido ü•≥ü•≥ü•≥!<br><br>
<small> Click para cerrar </small>
</div>
<!-- ======================== -->
<!--      ESCENA MIND-AR      -->
<!-- ======================== -->
<!-- Contiene la informaci√≥n que mostraremos al usuario cuando escanee los marcadores (entities)-->
<a-scene mindar-image="imageTargetSrc: targets.mind; maxTrack: 3; uiLoading:no; uiScanning:no" color-space=sRGB renderer="colorManagement: true, physicallyCorrectLights" vr-mode-ui="enabled: true" device-orientation-permission-ui="enabled: false">
<!-- C√°mara-->
<a-camera position="0 0 0" look-controls="enabled: false"></a-camera>
<!-- Marcador 0 -->
<a-entity mindar-image-target="targetIndex: 0" data-index=0></a-entity>
<!-- Marcador 1 -->
<a-entity mindar-image-target="targetIndex: 1" data-index=1></a-entity>
<!-- Marcador 2 -->
<a-entity mindar-image-target="targetIndex: 2" data-index=2></a-entity>
</a-scene>
<script type=module>
import {ContadorMarcadores} from './contador.js';
import {menuAbierto, menuCerrado} from './openclose-menu.js';
import {marcadoresData} from './marcadoresData.js';
import {arranque} from './arranque.js';
document.addEventListener("DOMContentLoaded",()=>{
ContadorMarcadores();
arranque();
let marcadorActivo = 0; 
window.showContent = function (option, element) {
const contentDiv = document.getElementById("menu-content");
document.querySelectorAll(".nav-item").forEach(btn => btn.classList.remove("cliqueado"));
if (element) element.classList.add("cliqueado");
if (!contentDiv) return;
const data = marcadoresData[marcadorActivo];
let content = "";
switch (option) {
case "Info":
content = `<p>${data.info}</p>`;
break;
case "Historia":
content = `<p>${data.historia}</p>`;
break;
case "Im√°genes":
content = `<img src="${data.imagen}" style="width: 100%; height: auto; border-radius: .2em; display: block;">`;
break;
case "Video":
content = `<video src="${data.video}" controls style="width: 100%; max-width: auto; height: auto; border-radius: .2em;"></video>`;
break;
default:
content = "<p>Selecciona una opci√≥n del men√∫</p>";
}
contentDiv.innerHTML = content;
}
// Detecci√≥n marcadores / apertura de men√∫
const menuGeneral = document.getElementById("Menu");
const contentDiv = document.getElementById("menu-content");
const nombreDiv = document.getElementById("nombre-persona");
const toggle = document.getElementById("toggle");
const toggleButtonMenu = document.querySelector("#Menu .button-toggle");
[0, 1, 2].forEach(idx => {
const marcador = document.querySelector(`[mindar-image-target="targetIndex: ${idx}"]`);
if (marcador) {
marcador.addEventListener("targetFound", () => {
marcadorActivo = idx;
nombreDiv.innerHTML = `<p>${marcadoresData[idx].nombre}</p>`;
menuGeneral.style.display = "block";
contentDiv.style.display = "block";
menuAbierto("Menu");
toggle.checked = true;
});
marcador.addEventListener("targetLost", () => {
});}});
toggleButtonMenu.addEventListener("click", () => {
toggle.checked = !toggle.checked;
if (toggle.checked) {
menuGeneral.style.display = "block";
contentDiv.style.display = "block";
menuAbierto("Menu");
} else {
menuCerrado("Menu");
contentDiv.style.display = "none";
}})});
</script>
</body>
</html>